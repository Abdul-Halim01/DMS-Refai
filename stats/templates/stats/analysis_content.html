{% load dict_extras %}
<div id="analysis-content">
    <h1>نظرة عامة على البيانات</h1>
    <p><strong>عدد الصفوف:</strong> {{ overview.num_rows }}</p>
    <p><strong>عدد الأعمدة:</strong> {{ overview.num_columns }}</p>
    
    <h2>الأعمدة والقيم المفقودة</h2>
    <ul>
        {% for col in overview.columns %}
            <li>{{ col }} &mdash; مفقود: {{ overview.missing_data|get_item:col }}</li>
        {% endfor %}
    </ul>
    
    <h1>الإحصائيات الملخصة (الأعمدة الرقمية)</h1>
    {% if summary_stats %}
    <table>
        <thead>
            <tr>
                <th>الإحصائية</th>
                {% for col in summary_stats %}
                    <th>{{ col }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% with first_stats=summary_stats.values|to_list|first %}
                {% for stat in first_stats|dict_keys %}
                <tr>
                    <td>{{ stat }}</td>
                    {% for col, stats in summary_stats.items %}
                        <td>{{ stats|get_item:stat }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            {% endwith %}
        </tbody>
    </table>
    {% else %}
        <p>لا يوجد ملخص رقمي متاح.</p>
    {% endif %}
    
    {% comment %} <h1>رؤى آلية</h1>
    <ul>
        {% if insights %}
            {% for insight in insights %}
                <li>{{ insight }}</li>
            {% endfor %}
        {% else %}
            <li>لم يتم العثور على رؤى مهمة.</li>
        {% endif %}
    </ul> {% endcomment %}
</div>
